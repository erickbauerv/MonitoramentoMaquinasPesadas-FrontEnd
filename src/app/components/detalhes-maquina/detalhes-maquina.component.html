<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

<div class="details-container" *ngIf="maquina">
  <div class="details-card">
    <div class="details-header">
      <h2 class="details-title">{{ editMode ? 'Editar Máquina' : 'Detalhes da Máquina' }}</h2>
      <div class="machine-id">ID: {{ maquina.id }}</div>
    </div>
    
    <div class="details-content">
      <!-- Modo visualização -->
      <div *ngIf="!editMode">
        <div class="detail-row">
          <span class="detail-label">Nome:</span>
          <span class="detail-value">{{ maquina.nome }}</span>
        </div>
        
        <div class="detail-row">
          <span class="detail-label">Localização:</span>
          <span class="detail-value">{{ maquina.localizacao }}</span>
        </div>
        
        <div class="detail-row">
          <span class="detail-label">Status:</span>
          <span class="detail-value status-badge status-{{ maquina.status }}">
            {{ getStatusText(maquina.status) }}
          </span>
        </div>
      </div>
      
      <!-- Modo edição -->
      <form *ngIf="editMode" (ngSubmit)="salvarEdicao()" class="edit-form" id="editForm">
        <div class="form-group">
          <label for="nome">Nome:</label>
          <input type="text" id="nome" [(ngModel)]="maquina.nome" name="nome" required>
        </div>
        
        <div class="form-group">
          <label for="localizacao">Localização:</label>
          <input type="text" id="localizacao" [(ngModel)]="maquina.localizacao" name="localizacao" required>
        </div>
        
        <div class="form-group">
          <label for="status">Status:</label>
          <select id="status" [(ngModel)]="maquina.status" name="status" required>
            <option value="operando">Operando</option>
            <option value="manutencao">Em Manutenção</option>
            <option value="desligada">Desligada</option>
          </select>
        </div>
      </form>
    </div>
    
    <div class="details-footer">
      <button routerLink="/" class="back-button">
        <i class="fas fa-arrow-left"></i> Voltar para lista
      </button>
      
      <button *ngIf="!editMode" (click)="ativarEdicao()" class="edit-button">
        <i class="fas fa-edit"></i> Editar máquina
      </button>
      
      <div *ngIf="editMode" class="edit-actions">
        <button type="button" (click)="cancelarEdicao()" class="cancel-button">
          <i class="fas fa-times"></i> Cancelar
        </button>
        
        <button type="submit" form="editForm" class="save-button">
          <i class="fas fa-save"></i> Salvar alterações
        </button>
      </div>
    </div>
  </div>
</div>